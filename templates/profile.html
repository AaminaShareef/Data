<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profile â€” Auralis Insights</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --primary: #3c583c;
  --background: #F2EFEA;
  --card-bg: #ffffff;
  --text-dark: #2B2B2B;
  --text-muted: #6A6A6A;
  --shadow: 0 20px 45px rgba(0,0,0,0.08);
}

body {
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(180deg, #ECE7E0, var(--background));
  padding: 70px;
  color: var(--text-dark);
}

/* HEADER */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 50px;
}

.header h1 {
  font-family: "Times New Roman", serif;
  color: var(--primary);
}

.header a {
  text-decoration: none;
  color: var(--primary);
  font-weight: 600;
}

/* PROFILE CARD */
.profile-card {
  background: var(--card-bg);
  padding: 40px;
  border-radius: 26px;
  box-shadow: var(--shadow);
  display: flex;
  gap: 40px;
  margin-bottom: 50px;
}

.avatar {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  background: var(--primary);
  color: white;
  font-size: 36px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
}

.profile-info h2 {
  margin-bottom: 8px;
}

.profile-info p {
  color: var(--text-muted);
  margin-bottom: 6px;
}

/* STATS */
.stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-bottom: 50px;
}

.stat-card {
  background: var(--card-bg);
  padding: 24px;
  border-radius: 20px;
  box-shadow: var(--shadow);
  text-align: center;
}

.stat-card h3 {
  font-size: 26px;
  color: var(--primary);
}

.stat-card p {
  font-size: 14px;
  color: var(--text-muted);
}

/* DATASETS */
.datasets {
  background: var(--card-bg);
  padding: 34px;
  border-radius: 26px;
  box-shadow: var(--shadow);
}

.datasets h3 {
  margin-bottom: 20px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 14px;
  border-bottom: 1px solid #eee;
  text-align: left;
}

th {
  font-size: 14px;
  color: var(--text-muted);
}

.status {
  font-weight: 600;
}

.processed { color: green; }
.pending { color: orange; }

@media (max-width: 900px) {
  body { padding: 30px; }
  .stats { grid-template-columns: 1fr; }
  .profile-card { flex-direction: column; align-items: center; }
}
</style>
</head>

<body>

<div class="header">
  <h1>User Profile</h1>
  <a href="{% url 'home' %}"><i class="fas fa-arrow-left"></i> Back to Home</a>
</div>

<!-- PROFILE -->
<div class="profile-card">
  <div class="avatar">
    {{ user.name|slice:":1"|upper }}
  </div>

  <div class="profile-info">
    <h2>{{ user.name }}</h2>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Account Type:</strong> Standard User</p>
  </div>
</div>

<!-- STATS -->
<div class="stats">
  <div class="stat-card">
    <h3>{{ total_datasets }}</h3>
    <p>Total Datasets</p>
  </div>

  <div class="stat-card">
    <h3>{{ processed_datasets }}</h3>
    <p>Processed</p>
  </div>

  <div class="stat-card">
    <h3>{{ pending_datasets }}</h3>
    <p>Pending</p>
  </div>

  <div class="stat-card">
    <h3>{{ total_reports }}</h3>
    <p>Reports Generated</p>
  </div>
</div>

<!-- RECENT DATASETS -->
<div class="datasets">
  <h3>Recent Datasets</h3>

  {% if recent_datasets %}
  <table>
    <tr>
      <th>File Name</th>
      <th>Uploaded On</th>
      <th>Status</th>
    </tr>

    {% for ds in recent_datasets %}
    <tr>
      <td>{{ ds.file_name }}</td>
      <td>{{ ds.uploaded_at|date:"M d, Y" }}</td>
      <td class="status {% if ds.is_processed %}processed{% else %}pending{% endif %}">
        {% if ds.is_processed %}Processed{% else %}Pending{% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
    <p>No datasets uploaded yet.</p>
  {% endif %}
</div>

</body>
</html>
